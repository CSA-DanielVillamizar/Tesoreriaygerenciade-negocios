@page "/tesoreria/conciliaciones-bancarias/{Id:guid}"
@using Microsoft.AspNetCore.Authorization
@using System.Text.Json
@using Server.DTOs.ConciliacionBancaria
@using Server.Services
@using Server.Components.Tesoreria
@attribute [Authorize(Policy = "AdminGerenteTesorero")]
@inject HttpClient Http
@inject NavigationManager Nav
@inject ToastService Toast

<PageTitle>Detalle Conciliación Bancaria</PageTitle>

<!-- Breadcrumb -->
<nav class="flex px-5 py-3 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700" aria-label="Breadcrumb">
  <ol class="inline-flex items-center space-x-1 md:space-x-3">
    <li class="inline-flex items-center">
      <a href="/" class="inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600 dark:text-gray-400 dark:hover:text-white">
        <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a 1 1 0 011 1v2a 1 1 0 001 1h2a 1 1 0 001-1v-6.586l.293.293a 1 1 0 001.414-1.414l-7-7z"></path></svg>
        Inicio
      </a>
    </li>
    <li>
      <div class="flex items-center">
        <svg class="w-6 h-6 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M7.293 14.707a 1 1 0 010-1.414L10.586 10 7.293 6.707a 1 1 0 011.414-1.414l4 4a 1 1 0 010 1.414l-4 4a 1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg>
        <a href="/tesoreria/conciliaciones-bancarias" class="ml-1 text-sm font-medium text-gray-700 hover:text-blue-600 dark:text-gray-400 dark:hover:text-white">Conciliaciones</a>
      </div>
    </li>
    <li aria-current="page">
      <div class="flex items-center">
        <svg class="w-6 h-6 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M7.293 14.707a 1 1 0 010-1.414L10.586 10 7.293 6.707a 1 1 0 011.414-1.414l4 4a 1 1 0 010 1.414l-4 4a 1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg>
        <span class="ml-1 text-sm font-medium text-gray-500 dark:text-gray-400">Detalle</span>
      </div>
    </li>
  </ol>
</nav>

<div class="container mx-auto px-4 py-6 max-w-7xl">
  @if (cargando)
  {
    <div class="py-20 text-center text-gray-500">Cargando detalle...</div>
  }
  else if (detalle is null)
  {
    <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-6">
      <h3 class="text-lg font-semibold text-red-700 dark:text-red-300">Conciliación no encontrada</h3>
      <p class="text-sm text-red-600 dark:text-red-400 mt-1">El identificador no existe o fue eliminado.</p>
      <div class="mt-4"><button class="px-4 py-2 bg-red-600 text-white rounded" @onclick="Volver">Volver</button></div>
    </div>
  }
  else
  {
    <!-- Header -->
    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
      <div>
        <h1 class="text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2">
          <svg class="w-8 h-8 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M3 7h18M3 12h18M3 17h18"/></svg>
          Conciliación @detalle.Periodo
        </h1>
        <p class="text-gray-600 dark:text-gray-400">Estado: <span class="px-2 py-1 rounded-full text-xs font-semibold @ClaseEstado(detalle.Estado)">@detalle.Estado</span></p>
      </div>
      <div class="flex gap-2 mt-4 md:mt-0">
        <button class="px-4 py-2 border rounded-lg" @onclick="Volver">Volver</button>
        <AuthorizeView Roles="Admin,Gerente,Tesorero">
          <Authorized>
            <div class="relative">
              <select class="px-3 py-2 border rounded-lg pr-10" @bind="nuevoEstado">
                <option value="">Cambiar Estado</option>
                <option>Pendiente</option>
                <option>EnProceso</option>
                <option>Conciliada</option>
                <option>ConDiferencias</option>
              </select>
            </div>
            <button class="px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg disabled:opacity-50" disabled="@procesando" @onclick="AplicarEstado">Aplicar</button>
            <button class="px-4 py-2 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-lg disabled:opacity-50" disabled="@procesando" @onclick="MatchingAutomatico">Matching</button>
            <button class="px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg disabled:opacity-50" disabled="@procesando" @onclick="RecalcularSaldos">Recalcular</button>
            <button class="px-4 py-2 bg-gradient-to-r from-cyan-500 to-cyan-600 text-white rounded-lg disabled:opacity-50" disabled="@procesando" @onclick="MostrarModalImportar">
              <svg class="w-5 h-5 inline-block mr-1" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
              </svg>
              Importar
            </button>
            <button class="px-4 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg disabled:opacity-50" disabled="@procesando" @onclick="MostrarModalNuevo">Nuevo Item</button>
          </Authorized>
        </AuthorizeView>
      </div>
    </div>

    <!-- Saldos -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
      <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4">
        <div class="text-xs text-blue-600 dark:text-blue-400">Saldo Libros</div>
        <div class="text-xl font-bold text-blue-700 dark:text-blue-300">@detalle.SaldoLibros.ToString("C0")</div>
      </div>
      <div class="bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 rounded-lg p-4">
        <div class="text-xs text-emerald-600 dark:text-emerald-400">Saldo Banco</div>
        <div class="text-xl font-bold text-emerald-700 dark:text-emerald-300">@detalle.SaldoBanco.ToString("C0")</div>
      </div>
      <div class="bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4">
        <div class="text-xs text-orange-600 dark:text-orange-400">Diferencia</div>
        <div class="text-xl font-bold @(detalle.Diferencia==0?"text-emerald-600 dark:text-emerald-300":"text-orange-700 dark:text-orange-300")">@detalle.Diferencia.ToString("C0")</div>
      </div>
      <div class="bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4">
        <div class="text-xs text-purple-600 dark:text-purple-400">Items Conciliados</div>
        <div class="text-xl font-bold text-purple-700 dark:text-purple-300">@detalle.ItemsConciliados / @detalle.TotalItems</div>
      </div>
    </div>

    <!-- Tabla Items -->
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700">
      <div class="flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700">
        <h2 class="text-lg font-semibold">Items</h2>
        <div class="text-sm text-gray-500">Pendientes: @detalle.ItemsPendientes</div>
      </div>
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
          <thead class="bg-gray-50 dark:bg-gray-700/50">
            <tr>
              <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Fecha</th>
              <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Tipo</th>
              <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Concepto</th>
              <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Referencia</th>
              <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Monto</th>
              <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Conciliado</th>
              <th class="px-4 py-2"></th>
            </tr>
          </thead>
          <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
            @if (detalle.Items.Count == 0)
            {
              <tr><td colspan="7" class="px-6 py-8 text-center text-gray-500">No hay items registrados</td></tr>
            }
            else
            {
              @foreach (var it in detalle.Items.OrderByDescending(i=>i.Fecha))
              {
                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50">
                  <td class="px-4 py-2 text-sm">@it.Fecha.ToString("yyyy-MM-dd")</td>
                  <td class="px-4 py-2 text-xs font-semibold"><span class="px-2 py-1 rounded @ClaseTipo(it.Tipo)">@it.Tipo</span></td>
                  <td class="px-4 py-2 text-sm">@it.Concepto</td>
                  <td class="px-4 py-2 text-sm">@it.Referencia</td>
                  <td class="px-4 py-2 text-sm font-semibold">@it.Monto.ToString("C0")</td>
                  <td class="px-4 py-2">
                    <button class="px-2 py-1 rounded text-xs @(it.Conciliado?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300":"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300")" @onclick="() => ToggleConciliado(it)">@(it.Conciliado ? "Sí" : "No")</button>
                  </td>
                  <td class="px-4 py-2 text-right whitespace-nowrap">
                    <AuthorizeView Roles="Admin,Gerente,Tesorero">
                      <Authorized>
                        <button class="p-2 text-emerald-600 hover:bg-emerald-50 dark:hover:bg-emerald-900/30 rounded" title="Editar" @onclick="() => EditarItem(it)">
                          <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/></svg>
                        </button>
                        <button class="p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded" title="Eliminar" @onclick="() => ConfirmarEliminarItem(it)">
                          <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/></svg>
                        </button>
                      </Authorized>
                    </AuthorizeView>
                  </td>
                </tr>
              }
            }
          </tbody>
        </table>
      </div>
    </div>
  }

  <!-- Modal Item -->
  @if (mostrarModalItem)
  {
    <div class="fixed inset-0 bg-black/40 flex items-center justify-center z-50">
      <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-xl p-6 border border-gray-200 dark:border-gray-700">
        <h3 class="text-lg font-semibold mb-4">@((itemForm.Id.HasValue?"Editar Item":"Nuevo Item"))</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium mb-1">Fecha</label>
            <input type="date" class="w-full rounded border" @bind="fechaItem" @bind:format="yyyy-MM-dd" />
          </div>
          <div>
            <label class="block text-sm font-medium mb-1">Tipo</label>
            <select class="w-full rounded border" @bind="itemForm.Tipo">
              <option>NotaDebito</option>
              <option>NotaCredito</option>
              <option>ChequeTransito</option>
              <option>DepositoTransito</option>
              <option>Ajuste</option>
            </select>
          </div>
          <div class="md:col-span-2">
            <label class="block text-sm font-medium mb-1">Concepto</label>
            <input type="text" class="w-full rounded border" @bind="itemForm.Concepto" maxlength="150" />
          </div>
          <div>
            <label class="block text-sm font-medium mb-1">Referencia</label>
            <input type="text" class="w-full rounded border" @bind="itemForm.Referencia" maxlength="80" />
          </div>
          <div>
            <label class="block text-sm font-medium mb-1">Monto</label>
            <input type="number" step="0.01" class="w-full rounded border" @bind="itemForm.Monto" />
          </div>
          <div class="md:col-span-2">
            <label class="inline-flex items-center gap-2 text-sm">
              <input type="checkbox" class="rounded" @bind="itemForm.Conciliado" />
              Conciliado
            </label>
          </div>
          <div class="md:col-span-2">
            <label class="block text-sm font-medium mb-1">Observaciones</label>
            <textarea rows="3" class="w-full rounded border" @bind="itemForm.Observaciones" maxlength="500"></textarea>
          </div>
        </div>
        <div class="flex justify-end gap-2 mt-6">
          <button class="px-4 py-2 border rounded" @onclick="CerrarModalItem">Cancelar</button>
          <button class="px-4 py-2 bg-emerald-600 text-white rounded disabled:opacity-50" disabled="@guardandoItem" @onclick="GuardarItem">@((guardandoItem?"Guardando...":"Guardar"))</button>
        </div>
      </div>
    </div>
  }

  <!-- Modal eliminar item -->
  @if (mostrarModalEliminarItem && itemSeleccionado != null)
  {
    <div class="fixed inset-0 bg-black/40 flex items-center justify-center z-50">
      <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md p-6 border">
        <h3 class="text-lg font-semibold mb-2">Eliminar Item</h3>
        <p class="text-sm text-gray-600 dark:text-gray-400">¿Eliminar el item <b>@itemSeleccionado.Concepto</b> por @itemSeleccionado.Monto.ToString("C0")?</p>
        <div class="flex justify-end gap-2 mt-6">
          <button class="px-4 py-2 border rounded" @onclick="() => mostrarModalEliminarItem = false">Cancelar</button>
          <button class="px-4 py-2 bg-red-600 text-white rounded disabled:opacity-50" disabled="@eliminandoItem" @onclick="EliminarItem">@((eliminandoItem?"Eliminando...":"Eliminar"))</button>
        </div>
      </div>
    </div>
  }

  <!-- Modal Importar Extracto -->
  <ImportarExtractoModal Mostrar="@mostrarModalImportar" 
                         ConciliacionId="@Id" 
                         OnCerrar="CerrarModalImportar" 
                         OnImportado="OnExtractoImportado" />
</div>

@code {
  [Parameter] public Guid Id { get; set; }
  private ConciliacionBancariaDetalleDto? detalle;
  private bool cargando = true;
  private bool procesando = false;
  private string? nuevoEstado;

  // Items
  private bool mostrarModalItem = false;
  private ItemConciliacionFormDto itemForm = new();
  private ItemConciliacionDto? itemSeleccionado;
  private bool guardandoItem = false;
  private bool eliminandoItem = false;
  private bool mostrarModalEliminarItem = false;
    private bool mostrarModalImportar = false;

  private DateTime fechaItem
  {
    get => itemForm.Fecha; set => itemForm.Fecha = value;
  }

  protected override async Task OnInitializedAsync() => await Cargar();

  private async Task Cargar()
  {
    try
    {
      cargando = true;
      var resp = await Http.GetAsync($"/api/conciliacionbancaria/{Id}");
      if (!resp.IsSuccessStatusCode)
      {
        Toast.ShowWarning("No se pudo cargar el detalle");
        return;
      }
      var json = await resp.Content.ReadAsStringAsync();
      detalle = JsonSerializer.Deserialize<ConciliacionBancariaDetalleDto>(json, new JsonSerializerOptions { PropertyNameCaseInsensitive = true });
    }
    catch
    {
      Toast.ShowError("Error cargando detalle");
    }
    finally { cargando = false; StateHasChanged(); }
  }

  private void Volver() => Nav.NavigateTo("/tesoreria/conciliaciones-bancarias");

  private async Task AplicarEstado()
  {
    if (string.IsNullOrWhiteSpace(nuevoEstado) || detalle is null) return;
    try
    {
      procesando = true;
      var content = new StringContent(JsonSerializer.Serialize(nuevoEstado), System.Text.Encoding.UTF8, "application/json");
      var resp = await Http.PostAsync($"/api/conciliacionbancaria/{detalle.Id}/cambiar-estado", content);
      if (resp.IsSuccessStatusCode)
      {
        Toast.ShowSuccess("Estado actualizado");
        nuevoEstado = null;
        await Cargar();
      }
      else
      {
        Toast.ShowWarning(await resp.Content.ReadAsStringAsync());
      }
    }
    catch { Toast.ShowError("Error cambiando estado"); }
    finally { procesando = false; }
  }

  private async Task MatchingAutomatico()
  {
    if (detalle is null) return;
    try
    {
      procesando = true;
      var resp = await Http.PostAsync($"/api/conciliacionbancaria/{detalle.Id}/matching-automatico", new StringContent("{}", System.Text.Encoding.UTF8, "application/json"));
      if (resp.IsSuccessStatusCode)
      {
        var txt = await resp.Content.ReadAsStringAsync();
        Toast.ShowInfo("Matching ejecutado");
        await Cargar();
      }
      else Toast.ShowWarning("No se pudo realizar matching");
    }
    catch { Toast.ShowError("Error en matching"); }
    finally { procesando = false; }
  }

  private async Task RecalcularSaldos()
  {
    if (detalle is null) return;
    try
    {
      procesando = true;
      var resp = await Http.GetAsync($"/api/conciliacionbancaria/calcular-saldos?ano={detalle.Ano}&mes={detalle.Mes}");
      if (resp.IsSuccessStatusCode)
      {
        var json = await resp.Content.ReadAsStringAsync();
        var doc = JsonDocument.Parse(json).RootElement;
        if (detalle != null)
        {
          detalle.SaldoLibros = doc.GetProperty("SaldoLibros").GetDecimal();
          detalle.SaldoBanco = doc.GetProperty("SaldoBanco").GetDecimal();
          detalle.Diferencia = doc.GetProperty("Diferencia").GetDecimal();
        }
        Toast.ShowSuccess("Saldos recalculados");
      }
      else Toast.ShowWarning("No se recalculó");
      StateHasChanged();
    }
    catch { Toast.ShowError("Error recalculando saldos"); }
    finally { procesando = false; }
  }

  private void MostrarModalNuevo()
  {
    itemForm = new ItemConciliacionFormDto();
    mostrarModalItem = true;
  }

    private void MostrarModalImportar() => mostrarModalImportar = true;
    private void CerrarModalImportar() => mostrarModalImportar = false;
    private async Task OnExtractoImportado()
    {
      await Cargar();
      Toast.ShowSuccess("Extracto importado y procesado");
    }

  private void EditarItem(ItemConciliacionDto it)
  {
    itemForm = new ItemConciliacionFormDto
    {
      Id = it.Id,
      Fecha = it.Fecha,
      Tipo = it.Tipo,
      Concepto = it.Concepto,
      Referencia = it.Referencia,
      Monto = it.Monto,
      Conciliado = it.Conciliado,
      Observaciones = it.Observaciones
    };
    mostrarModalItem = true;
  }

  private void CerrarModalItem() => mostrarModalItem = false;

  private async Task GuardarItem()
  {
    if (detalle is null) return;
    if (string.IsNullOrWhiteSpace(itemForm.Tipo) || string.IsNullOrWhiteSpace(itemForm.Concepto)) { Toast.ShowWarning("Tipo y Concepto requeridos"); return; }
    try
    {
      guardandoItem = true;
      HttpResponseMessage resp;
      var content = new StringContent(JsonSerializer.Serialize(itemForm), System.Text.Encoding.UTF8, "application/json");
      if (itemForm.Id.HasValue)
      {
        resp = await Http.PutAsync($"/api/conciliacionbancaria/items/{itemForm.Id.Value}", content);
      }
      else
      {
        resp = await Http.PostAsync($"/api/conciliacionbancaria/{detalle.Id}/items", content);
      }
      if (resp.IsSuccessStatusCode)
      {
        Toast.ShowSuccess("Item guardado");
        mostrarModalItem = false;
        await Cargar();
      }
      else Toast.ShowWarning(await resp.Content.ReadAsStringAsync());
    }
    catch { Toast.ShowError("Error guardando item"); }
    finally { guardandoItem = false; }
  }

  private void ConfirmarEliminarItem(ItemConciliacionDto it)
  {
    itemSeleccionado = it; mostrarModalEliminarItem = true;
  }

  private async Task EliminarItem()
  {
    if (itemSeleccionado == null) return;
    try
    {
      eliminandoItem = true;
      var resp = await Http.DeleteAsync($"/api/conciliacionbancaria/items/{itemSeleccionado.Id}");
      if (resp.IsSuccessStatusCode)
      {
        Toast.ShowSuccess("Item eliminado");
        mostrarModalEliminarItem = false;
        await Cargar();
      }
      else Toast.ShowWarning(await resp.Content.ReadAsStringAsync());
    }
    catch { Toast.ShowError("Error eliminando item"); }
    finally { eliminandoItem = false; }
  }

  private async Task ToggleConciliado(ItemConciliacionDto it)
  {
    try
    {
      var nuevoValor = !it.Conciliado;
      var content = new StringContent(JsonSerializer.Serialize(nuevoValor), System.Text.Encoding.UTF8, "application/json");
      var resp = await Http.PatchAsync($"/api/conciliacionbancaria/items/{it.Id}/conciliado", content);
      if (resp.IsSuccessStatusCode)
      {
        it.Conciliado = nuevoValor;
        if (detalle != null)
        {
          detalle.ItemsConciliados = detalle.Items.Count(x => x.Conciliado);
          detalle.ItemsPendientes = detalle.Items.Count(x => !x.Conciliado);
        }
        StateHasChanged();
      }
      else Toast.ShowWarning("No se actualizó el estado del item");
    }
    catch { Toast.ShowError("Error marcando item"); }
  }

  private static string ClaseEstado(string estado) => estado switch
  {
    "Pendiente" => "bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300",
    "EnProceso" => "bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",
    "Conciliada" => "bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-300",
    "ConDiferencias" => "bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",
    _ => "bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"
  };

  private static string ClaseTipo(string tipo) => tipo switch
  {
    "NotaDebito" => "bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300",
    "NotaCredito" => "bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300",
    "ChequeTransito" => "bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300",
    "DepositoTransito" => "bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",
    "Ajuste" => "bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300",
    _ => "bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-300"
  };
}
