<!-- Topbar SaaS moderno -->
<header class="sticky top-0 z-30 bg-white dark:bg-slate-950 border-b border-slate-200 dark:border-slate-800 flex items-center h-16 px-6 gap-4">
    <button class="md:hidden text-slate-500 hover:text-primary" aria-label="Abrir menú">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M4 6h16M4 12h16M4 18h16"/></svg>
    </button>
    <div class="flex-1 flex items-center gap-3">
        <nav class="flex items-center gap-2 text-sm text-slate-500">
            <span class="font-semibold text-slate-700 dark:text-slate-200 flex items-center gap-1">
                <svg class="w-4 h-4 text-primary" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M3 12l2-2m0 0l7-7 7 7M13 5v6h6" stroke-linecap="round" stroke-linejoin="round"/></svg>
                Dashboard
            </span>
            <span>/</span>
            <span>Página</span>
        </nav>
    <div class="ml-auto flex items-center gap-2">
            <button class="inline-flex items-center px-3 py-2 rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 transition" aria-label="Buscar (Ctrl+K)">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>
                <span class="ml-2 hidden md:inline">Buscar</span>
                <span class="ml-2 text-xs text-slate-400">Ctrl+K</span>
            </button>
            <button class="inline-flex items-center px-3 py-2 rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 transition" aria-label="Modo oscuro" @onclick="ToggleDarkMode">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 3v1m0 16v1m8.66-8.66l-.71.71M4.05 4.05l-.71.71M21 12h-1M4 12H3m16.24 4.24l-.71-.71M6.34 17.66l-.71-.71"/><circle cx="12" cy="12" r="5"/></svg>
            </button>
            <AuthorizeView>
                <Authorized Context="auth">
                    <div class="flex items-center gap-2">
                        <img src="images/avatar-default.png" class="w-7 h-7 rounded-full" alt="Usuario" />
                        <span class="hidden md:inline text-sm">@((auth?.User?.Identity?.Name) ?? "Usuario")</span>
                        <a href="/Identity/Account/Logout" class="inline-flex items-center px-3 py-2 rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 transition">Salir</a>
                    </div>
                </Authorized>
                <NotAuthorized>
                    <a href="/Identity/Account/Login" class="inline-flex items-center px-3 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition">Iniciar sesión</a>
                </NotAuthorized>
            </AuthorizeView>
        </div>
    </div>
</header>

@code {
    [Inject] private IJSRuntime JS { get; set; } = default!;

    private async Task ToggleDarkMode()
    {
        await JS.InvokeVoidAsync("eval", "document.documentElement.classList.toggle('dark')");
    }
}
