@typeparam TItem
<div class="overflow-x-auto rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 shadow-sm" @attributes="AdditionalAttributes">
    <table class="min-w-full divide-y divide-slate-200 dark:divide-slate-800">
        <thead class="bg-slate-50 dark:bg-slate-800 sticky top-0 z-10">
            <tr>
                @foreach (var col in Columns)
                {
                    <th class="px-6 py-3 text-left text-xs font-semibold text-slate-500 dark:text-slate-300 uppercase">@col.Header</th>
                }
            </tr>
        </thead>
        <tbody>
            @if (Loading)
            {
                <tr><td colspan="@Columns.Count"><UISkeleton Class="h-8 w-full" /></td></tr>
            }
            else if (Items == null || !Items.Any())
            {
                <tr>
                    <td colspan="@Columns.Count" class="text-center py-8 text-slate-400">
                        <svg class="mx-auto mb-2 w-8 h-8 text-slate-300" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/></svg>
                        <div>Aún no hay datos</div>
                    </td>
                </tr>
            }
            else
            {
                @foreach (var item in Items)
                {
                    <tr class="hover:bg-slate-50 dark:hover:bg-slate-800 transition">
                        @foreach (var col in Columns)
                        {
                            <td class="px-6 py-4">
                                @{
                                    var cell = col.Cell(item);
                                    if (cell is RenderFragment fragment)
                                    {
                                        @fragment
                                    }
                                    else
                                    {
                                        @cell
                                    }
                                }
                            </td>
                        }
                    </tr>
                }
            }
        </tbody>
    </table>
    @if (ShowPagination)
    {
        <div class="flex justify-end items-center p-4 gap-2">
            <button class="px-4 py-2 rounded-lg bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed transition" disabled="@IsFirstPage" @onclick="PrevPage">Anterior</button>
            <span class="text-xs">Página @Page de @TotalPages</span>
            <button class="px-4 py-2 rounded-lg bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed transition" disabled="@IsLastPage" @onclick="NextPage">Siguiente</button>
        </div>
    }
</div>

@code {
    [Parameter] public List<TableColumn<TItem>> Columns { get; set; } = new();
    [Parameter] public List<TItem> Items { get; set; } = new();
    [Parameter] public bool Loading { get; set; }
    [Parameter] public bool ShowPagination { get; set; }
    [Parameter] public int Page { get; set; } = 1;
    [Parameter] public int TotalPages { get; set; } = 1;
    [Parameter] public EventCallback PrevPage { get; set; }
    [Parameter] public EventCallback NextPage { get; set; }
    [Parameter] public string? Class { get; set; }
        [Parameter(CaptureUnmatchedValues = true)] public IReadOnlyDictionary<string, object>? AdditionalAttributes { get; set; }
    private bool IsFirstPage => Page <= 1;
    private bool IsLastPage => Page >= TotalPages;
}
