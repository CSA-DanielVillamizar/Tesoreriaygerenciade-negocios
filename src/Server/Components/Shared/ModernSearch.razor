@* 
    ModernSearch.razor
    Componente de búsqueda moderna con diseño redondeado y iconos
    Estilo inspirado en dashboards modernos
*@

    <div class="modern-search @Class">
    <MudIcon Icon="@Icons.Material.Filled.Search" Class="search-icon" />
    <input 
        type="text" 
        placeholder="@Placeholder" 
        value="@Value"
        @oninput="OnValueChanged"
        class="modern-search-input" />
    @if (!string.IsNullOrEmpty(Value))
    {
        <button @onclick="ClearSearch" class="clear-icon" type="button">
            <MudIcon Icon="@Icons.Material.Filled.Close" Size="Size.Small" />
        </button>
    }
</div>

@code {
    /// <summary>
        /// Clases CSS adicionales para el contenedor
        /// </summary>
        [Parameter]
        public string Class { get; set; } = string.Empty;

        /// <summary>
    /// Placeholder del campo de búsqueda
    /// </summary>
    [Parameter]
    public string Placeholder { get; set; } = "Buscar...";

    /// <summary>
    /// Valor actual de la búsqueda
    /// </summary>
    [Parameter]
    public string Value { get; set; } = string.Empty;

    /// <summary>
    /// Evento que se dispara cuando cambia el valor
    /// </summary>
    [Parameter]
    public EventCallback<string> ValueChanged { get; set; }

    /// <summary>
    /// Maneja el cambio de valor del input
    /// </summary>
    private async Task OnValueChanged(ChangeEventArgs e)
    {
        Value = e.Value?.ToString() ?? string.Empty;
        await ValueChanged.InvokeAsync(Value);
    }

    /// <summary>
    /// Limpia el campo de búsqueda
    /// </summary>
    private async Task ClearSearch()
    {
        Value = string.Empty;
        await ValueChanged.InvokeAsync(Value);
    }
}
